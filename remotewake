#!/bin/bash

if [ "$1" == "-h" ] || [ "$1" == "--help" ]; then
        echo " "
        echo "Galaxy Media Tools - Remote WoL Transcode Server"
        echo " "
        echo "-h or --help : Help"
        echo "-u : Upgrade from git only"
        echo " "
        exit 0
fi

if [ "$1" == "" ]; then
	echo "Argument missing. Specify which transcode server to start-up"
	exit 1
fi

source /opt/galaxymediatools/precheck

if [ "$1" == "$T1NAME" ]; then
  if [ "`ping -c 1 $T1IP`" ]; then
   echo "$T1NAME server already running."
   exit 1
 else
  echo "Waking transcode server $T1NAME"
  wakeonlan $T1MAC
  sleep 3
  echo -e "Transcode server $TNAME started"
  exit 0
 fi
elif [ "$1" == "$T2NAME" ]; then
 if [ "`ping -c 1 $T2IP`" ]; then
   echo "$T2NAME server already running."
   exit 1
 else
  echo "Waking transcode server $T2NAME"
  wakeonlan $T2MAC
  sleep 3
  echo -e "Transcode server $T2NAME started"
  exit 0
 fi
fi
echo "No server exists with that name"
exit 1
